#!/usr/bin/env sh

# í˜„ì¬ ë¸Œëœì¹˜ í™•ì¸
current_branch=$(git symbolic-ref --short HEAD)

# 1. main ë¸Œëœì¹˜ì—ì„œ ì§ì ‘ push ì°¨ë‹¨
if [ "$current_branch" = "main" ]; then
  echo "ğŸš« Error: main ë¸Œëœì¹˜ì—ì„œ ì§ì ‘ pushëŠ” í—ˆìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤!"
  echo "ğŸ’¡ Advice: ìƒˆë¡œìš´ ë¸Œëœì¹˜ë¥¼ ë§Œë“¤ì–´ì„œ ì‘ì—… í›„ pushí•´ì£¼ì„¸ìš”."
  exit 1
fi

# 2. main ë¸Œëœì¹˜ë¡œ push ì‹œë„ ì°¨ë‹¨
while read local_ref local_sha remote_ref remote_sha
do
  # remote_refê°€ refs/heads/mainì´ë©´ ì°¨ë‹¨
  if [ "$remote_ref" = "refs/heads/main" ]; then
    echo "ğŸš« Error: main ë¸Œëœì¹˜ë¡œ ì§ì ‘ pushëŠ” í—ˆìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤!"
    echo "ğŸ’¡ Advice: Pull Requestë¥¼ í†µí•´ main ë¸Œëœì¹˜ì— ë¨¸ì§€í•´ì£¼ì„¸ìš”."
    exit 1
  fi
done

exit 0